{
	"name": "pstn_transfer_retry_429",
	"description": "PSTN transfer endpoint retries on 429 and eventually succeeds",
	"mock": {
		"path": "/v1/customers/test-customer/profiles/test-profile/virtualAgents/test-agent:generatePSTNTransferData",
		"method": "POST",
		"responses": [
			{
				"status": 429,
				"body": {
					"error": "Too Many Requests"
				},
				"headers": {
					"Retry-After": "1"
				}
			},
			{
				"status": 200,
				"body": {
					"phoneNumber": "+1234567890",
					"dtmfSequence": "1234"
				}
			}
		]
	},
	"test": {
		"type": "handler",
		"action": "getPSTNTransferData"
	},
	"expectations": {
		"status": 200,
		"retries": true,
		"body": {
			"phoneNumber": "+1234567890",
			"dtmfSequence": "1234"
		}
	}
}
